<p id="notice"><%= notice %></p>

<h1><%= @user.username %></h1>

<p>
  <% if @user.beer_clubs.empty? %>
      User not a member of any beerclubs.
  <% else %>
      User is a member of
      <% @user.beer_clubs.each do |club| %>
        <%= link_to "#{club.name}", club %>
      <% end %>
  <% end %>
</p>

<p>
  <% if @user.ratings.empty? %>
      User has not rated anything!
  <% else %>
    <p>
      Has made <%= pluralize(@user.ratings.count, 'rating', 'ratings') %>, average <%= number_with_precision @user.average_rating, :precision => 2 %>
    </p>
    <p>
      Based on his ratings <%= @user.favorite_style %> is his favorite kind of beer and <%= @user.favorite_brewery.name %> is his favorite brewery.
    </p>
    <p>
    <strong>Ratings</strong>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Beer</th>
          <th>Rating</th>
          <th colspan="1"></th>
        </tr>
      </thead>
      <tbody>
        <% @user.ratings.each do |rating| %>
          <tr>
            <td><%= rating.beer %></td>
            <td><%= rating.score %></td>
            <% if @user == current_user %>
                <td>
                  <%= link_to 'delete', rating, method: :delete , data: { confirm: 'Are you sure?' }, class:'btn btn-danger' %>
                </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
    </p>
  <% end %>
</p>


<% if @user == current_user %>
  <%= link_to 'Edit', edit_user_path(@user), class:'btn btn-warning' %> |
  <%= link_to 'Delete', @user, method: :delete, data: { confirm: 'Are you sure?'}, class:'btn btn-danger' %> |
<% end %>
<%= link_to 'Back', users_path, class:'btn btn-default' %>
